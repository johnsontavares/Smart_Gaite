{"ast":null,"code":"import { getMetadataArgsStorage } from \"../index\";\n/**\n * Composite unique constraint must be set on entity classes and must specify entity's fields to be unique.\n */\n\nexport function Unique(nameOrFields, maybeFields) {\n  var name = typeof nameOrFields === \"string\" ? nameOrFields : undefined;\n  var fields = typeof nameOrFields === \"string\" ? maybeFields : nameOrFields;\n  return function (clsOrObject, propertyName) {\n    var columns = fields;\n\n    if (propertyName !== undefined) {\n      switch (typeof propertyName) {\n        case \"string\":\n          columns = [propertyName];\n          break;\n\n        case \"symbol\":\n          columns = [propertyName.toString()];\n          break;\n      }\n    }\n\n    var args = {\n      target: propertyName ? clsOrObject.constructor : clsOrObject,\n      name: name,\n      columns: columns\n    };\n    getMetadataArgsStorage().uniques.push(args);\n  };\n}","map":{"version":3,"sources":["../browser/src/decorator/Unique.ts"],"names":[],"mappings":"AAAA,SAAS,sBAAT,QAAuC,UAAvC;AAuBA;;AAEG;;AACH,OAAM,SAAU,MAAV,CAAiB,YAAjB,EACF,WADE,EAC8E;AAChF,MAAM,IAAI,GAAG,OAAO,YAAP,KAAwB,QAAxB,GAAmC,YAAnC,GAAkD,SAA/D;AACA,MAAM,MAAM,GAAG,OAAO,YAAP,KAAwB,QAAxB,GAAuG,WAAvG,GAAqH,YAApI;AAEA,SAAO,UAAU,WAAV,EAA0C,YAA1C,EAAwE;AAE3E,QAAI,OAAO,GAAG,MAAd;;AAEA,QAAI,YAAY,KAAK,SAArB,EAAgC;AAC5B,cAAQ,OAAQ,YAAhB;AACI,aAAK,QAAL;AACI,UAAA,OAAO,GAAG,CAAC,YAAD,CAAV;AACA;;AAEJ,aAAK,QAAL;AACI,UAAA,OAAO,GAAG,CAAC,YAAY,CAAC,QAAb,EAAD,CAAV;AACA;AAPR;AASH;;AAED,QAAM,IAAI,GAAuB;AAC7B,MAAA,MAAM,EAAE,YAAY,GAAG,WAAW,CAAC,WAAf,GAA6B,WADpB;AAE7B,MAAA,IAAI,EAAE,IAFuB;AAG7B,MAAA,OAAO,EAAA;AAHsB,KAAjC;AAKA,IAAA,sBAAsB,GAAG,OAAzB,CAAiC,IAAjC,CAAsC,IAAtC;AACH,GAtBD;AAuBH","sourcesContent":["import { getMetadataArgsStorage } from \"../index\";\nimport { UniqueMetadataArgs } from \"../metadata-args/UniqueMetadataArgs\";\n\n/**\n * Composite unique constraint must be set on entity classes and must specify entity's fields to be unique.\n */\nexport function Unique(name: string, fields: string[]): ClassDecorator & PropertyDecorator;\n\n/**\n * Composite unique constraint must be set on entity classes and must specify entity's fields to be unique.\n */\nexport function Unique(fields: string[]): ClassDecorator & PropertyDecorator;\n\n/**\n * Composite unique constraint must be set on entity classes and must specify entity's fields to be unique.\n */\nexport function Unique(fields: (object?: any) => (any[] | { [key: string]: number })): ClassDecorator & PropertyDecorator;\n\n/**\n * Composite unique constraint must be set on entity classes and must specify entity's fields to be unique.\n */\nexport function Unique(name: string, fields: (object?: any) => (any[] | { [key: string]: number })): ClassDecorator & PropertyDecorator;\n\n/**\n * Composite unique constraint must be set on entity classes and must specify entity's fields to be unique.\n */\nexport function Unique(nameOrFields?: string | string[] | ((object: any) => (any[] | { [key: string]: number })),\n    maybeFields?: ((object?: any) => (any[] | { [key: string]: number })) | string[]): ClassDecorator & PropertyDecorator {\n    const name = typeof nameOrFields === \"string\" ? nameOrFields : undefined;\n    const fields = typeof nameOrFields === \"string\" ? <((object?: any) => (any[] | { [key: string]: number })) | string[]>maybeFields : nameOrFields as string[];\n\n    return function (clsOrObject: Function | Object, propertyName?: string | symbol) {\n\n        let columns = fields;\n\n        if (propertyName !== undefined) {\n            switch (typeof (propertyName)) {\n                case \"string\":\n                    columns = [propertyName];\n                    break;\n\n                case \"symbol\":\n                    columns = [propertyName.toString()];\n                    break;\n            }\n        }\n\n        const args: UniqueMetadataArgs = {\n            target: propertyName ? clsOrObject.constructor : clsOrObject as Function,\n            name: name,\n            columns,\n        };\n        getMetadataArgsStorage().uniques.push(args);\n    };\n}\n"],"sourceRoot":".."},"metadata":{},"sourceType":"module"}