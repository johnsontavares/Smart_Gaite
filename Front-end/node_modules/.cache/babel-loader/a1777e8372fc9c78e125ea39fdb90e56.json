{"ast":null,"code":"/**\n * Performs logging of the events in TypeORM.\n * This version of logger uses console to log events and does not use syntax highlighting.\n */\nvar SimpleConsoleLogger =\n/** @class */\nfunction () {\n  // -------------------------------------------------------------------------\n  // Constructor\n  // -------------------------------------------------------------------------\n  function SimpleConsoleLogger(options) {\n    this.options = options;\n  } // -------------------------------------------------------------------------\n  // Public Methods\n  // -------------------------------------------------------------------------\n\n  /**\n   * Logs query and parameters used in it.\n   */\n\n\n  SimpleConsoleLogger.prototype.logQuery = function (query, parameters, queryRunner) {\n    if (this.options === \"all\" || this.options === true || Array.isArray(this.options) && this.options.indexOf(\"query\") !== -1) {\n      var sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n      console.log(\"query\" + \": \" + sql);\n    }\n  };\n  /**\n   * Logs query that is failed.\n   */\n\n\n  SimpleConsoleLogger.prototype.logQueryError = function (error, query, parameters, queryRunner) {\n    if (this.options === \"all\" || this.options === true || Array.isArray(this.options) && this.options.indexOf(\"error\") !== -1) {\n      var sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n      console.log(\"query failed: \" + sql);\n      console.log(\"error:\", error);\n    }\n  };\n  /**\n   * Logs query that is slow.\n   */\n\n\n  SimpleConsoleLogger.prototype.logQuerySlow = function (time, query, parameters, queryRunner) {\n    var sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n    console.log(\"query is slow: \" + sql);\n    console.log(\"execution time: \" + time);\n  };\n  /**\n   * Logs events from the schema build process.\n   */\n\n\n  SimpleConsoleLogger.prototype.logSchemaBuild = function (message, queryRunner) {\n    if (this.options === \"all\" || Array.isArray(this.options) && this.options.indexOf(\"schema\") !== -1) {\n      console.log(message);\n    }\n  };\n  /**\n   * Logs events from the migrations run process.\n   */\n\n\n  SimpleConsoleLogger.prototype.logMigration = function (message, queryRunner) {\n    console.log(message);\n  };\n  /**\n   * Perform logging using given logger, or by default to the console.\n   * Log has its own level and message.\n   */\n\n\n  SimpleConsoleLogger.prototype.log = function (level, message, queryRunner) {\n    switch (level) {\n      case \"log\":\n        if (this.options === \"all\" || Array.isArray(this.options) && this.options.indexOf(\"log\") !== -1) console.log(message);\n        break;\n\n      case \"info\":\n        if (this.options === \"all\" || Array.isArray(this.options) && this.options.indexOf(\"info\") !== -1) console.info(message);\n        break;\n\n      case \"warn\":\n        if (this.options === \"all\" || Array.isArray(this.options) && this.options.indexOf(\"warn\") !== -1) console.warn(message);\n        break;\n    }\n  }; // -------------------------------------------------------------------------\n  // Protected Methods\n  // -------------------------------------------------------------------------\n\n  /**\n   * Converts parameters to a string.\n   * Sometimes parameters can have circular objects and therefor we are handle this case too.\n   */\n\n\n  SimpleConsoleLogger.prototype.stringifyParams = function (parameters) {\n    try {\n      return JSON.stringify(parameters);\n    } catch (error) {\n      // most probably circular objects in parameters\n      return parameters;\n    }\n  };\n\n  return SimpleConsoleLogger;\n}();\n\nexport { SimpleConsoleLogger };","map":{"version":3,"sources":["../browser/src/logger/SimpleConsoleLogger.ts"],"names":[],"mappings":"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","sourcesContent":["import {LoggerOptions} from \"./LoggerOptions\";\nimport {QueryRunner} from \"../query-runner/QueryRunner\";\nimport {Logger} from \"./Logger\";\n\n/**\n * Performs logging of the events in TypeORM.\n * This version of logger uses console to log events and does not use syntax highlighting.\n */\nexport class SimpleConsoleLogger implements Logger {\n\n    // -------------------------------------------------------------------------\n    // Constructor\n    // -------------------------------------------------------------------------\n\n    constructor(private options?: LoggerOptions) {\n    }\n\n    // -------------------------------------------------------------------------\n    // Public Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Logs query and parameters used in it.\n     */\n    logQuery(query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (Array.isArray(this.options) && this.options.indexOf(\"query\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            console.log(\"query\" + \": \" + sql);\n        }\n    }\n\n    /**\n     * Logs query that is failed.\n     */\n    logQueryError(error: string, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || this.options === true || (Array.isArray(this.options) && this.options.indexOf(\"error\") !== -1)) {\n            const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n            console.log(`query failed: ` + sql);\n            console.log(`error:`, error);\n        }\n    }\n\n    /**\n     * Logs query that is slow.\n     */\n    logQuerySlow(time: number, query: string, parameters?: any[], queryRunner?: QueryRunner) {\n        const sql = query + (parameters && parameters.length ? \" -- PARAMETERS: \" + this.stringifyParams(parameters) : \"\");\n        console.log(`query is slow: ` + sql);\n        console.log(`execution time: ` + time);\n    }\n\n    /**\n     * Logs events from the schema build process.\n     */\n    logSchemaBuild(message: string, queryRunner?: QueryRunner) {\n        if (this.options === \"all\" || (Array.isArray(this.options) && this.options.indexOf(\"schema\") !== -1)) {\n            console.log(message);\n        }\n    }\n\n    /**\n     * Logs events from the migrations run process.\n     */\n    logMigration(message: string, queryRunner?: QueryRunner) {\n        console.log(message);\n    }\n\n    /**\n     * Perform logging using given logger, or by default to the console.\n     * Log has its own level and message.\n     */\n    log(level: \"log\"|\"info\"|\"warn\", message: any, queryRunner?: QueryRunner) {\n        switch (level) {\n            case \"log\":\n                if (this.options === \"all\" || (Array.isArray(this.options) && this.options.indexOf(\"log\") !== -1))\n                    console.log(message);\n                break;\n            case \"info\":\n                if (this.options === \"all\" || (Array.isArray(this.options) && this.options.indexOf(\"info\") !== -1))\n                    console.info(message);\n                break;\n            case \"warn\":\n                if (this.options === \"all\" || (Array.isArray(this.options) && this.options.indexOf(\"warn\") !== -1))\n                    console.warn(message);\n                break;\n        }\n    }\n\n    // -------------------------------------------------------------------------\n    // Protected Methods\n    // -------------------------------------------------------------------------\n\n    /**\n     * Converts parameters to a string.\n     * Sometimes parameters can have circular objects and therefor we are handle this case too.\n     */\n    protected stringifyParams(parameters: any[]) {\n        try {\n            return JSON.stringify(parameters);\n\n        } catch (error) { // most probably circular objects in parameters\n            return parameters;\n        }\n    }\n\n}\n"],"sourceRoot":".."},"metadata":{},"sourceType":"module"}