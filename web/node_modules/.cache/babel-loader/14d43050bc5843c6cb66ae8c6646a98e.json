{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\REINALDO\\\\Desktop\\\\ls-gait-web\\\\dashboard\\\\src\\\\pages\\\\register\\\\confirmEmail\\\\component\\\\clocker.js\";\nimport React from 'react';\nimport Botao from './botao';\nimport Api from '../../../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Clock extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      contador: 60,\n      estado: \"Confirm e-mail\"\n    };\n    this.handleContadorplus = this.handleContadorplus.bind(this);\n    this.handleContadorminus = this.handleContadorminus.bind(this);\n    this.aumentar = this.aumentar.bind(this);\n  }\n\n  async handleContadorplus(e) {\n    try {\n      //Pega o dado do local storage em arquivo bruto(\"fulano@gmail.com\")\n      const emailExists = sessionStorage.getItem('emailValidator'); //console.log(\"email COM PARSE\",JSON.parse( emailExists))\n      //Transforma a string em objt (JSON.parse(emailExists))\n\n      const data = {\n        email: JSON.parse(emailExists)\n      }; //Manda via post esse dado para a api {\"email\":\"fulano@gmail.com\"}\n\n      const res = await Api.post('findEmail/', data);\n\n      if (res.status === 200) {\n        //Se ok retorna 200 e o id específico daquele email\n        console.log(\">>>>>>>>\", res.data.id); //Guardo o id no sessionStorage\n\n        sessionStorage.setItem('id', res.data.id); //Busco esse id\n\n        const dataId2 = sessionStorage.getItem('id');\n        console.log(\"id>\", dataId2);\n        window.location.href = '/confirmEmail';\n      }\n    } catch (error) {\n      //Retorno erros da api\n      const {\n        data\n      } = error.response;\n      alert(data.message);\n    } //Pega os dados brutos do sessionStorage\n\n\n    const emailExists = sessionStorage.getItem('emailValidator'); //Transforma em objeto\n\n    const email = JSON.parse(emailExists); //Busca no banco o email\n\n    await Api.post('sendEmailController', {\n      email\n    }).then(response => {\n      if (response.status === 200) {\n        alert('Link sent, check your email');\n      }\n    });\n\n    if (this.state.estado === \"Confirm e-mail\") {\n      this.setState({\n        estado: ''\n      });\n      this._interval = setInterval(this.aumentar, 1000);\n    }\n  }\n\n  aumentar(e) {\n    if (this.state.estado === '') {\n      this.setState({\n        contador: this.state.contador - 1\n      });\n\n      if (this.state.contador === 0) {\n        window.location.href = '/confirmEmail';\n      }\n    }\n  }\n\n  async handleContadorminus() {\n    const emailExists = sessionStorage.getItem('emailValidator');\n    const email = JSON.parse(emailExists);\n    await Api.post('sendEmailController', {\n      email\n    }).then(resp => {\n      console.log(resp);\n    });\n  }\n\n  close() {\n    window.location.href = '/';\n    sessionStorage.clear();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \" text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: this.state.contador\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Botao, {\n        text: this.state.estado,\n        onClick: this.handleContadorplus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Botao, {\n        text: \"Resend\",\n        onClick: this.handleContadorminus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Botao, {\n        text: \"Close\",\n        onClick: this.close\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/REINALDO/Desktop/ls-gait-web/dashboard/src/pages/register/confirmEmail/component/clocker.js"],"names":["React","Botao","Api","Clock","Component","constructor","state","contador","estado","handleContadorplus","bind","handleContadorminus","aumentar","e","emailExists","sessionStorage","getItem","data","email","JSON","parse","res","post","status","console","log","id","setItem","dataId2","window","location","href","error","response","alert","message","then","setState","_interval","setInterval","resp","close","clear","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Botao from './botao';\r\nimport Api from '../../../../services/api';\r\n\r\nexport default class Clock extends React.Component {\r\n\r\n    constructor (){\r\n        super();\r\n        this.state={\r\n          contador:60,\r\n          estado:\"Confirm e-mail\",\r\n          \r\n        }\r\n        \r\n        this.handleContadorplus= this.handleContadorplus.bind(this);\r\n        this.handleContadorminus= this.handleContadorminus.bind(this);\r\n        this.aumentar= this.aumentar.bind(this);\r\n      }\r\n    \r\n      \r\n      async handleContadorplus(e){\r\n         \r\n        try {\r\n          //Pega o dado do local storage em arquivo bruto(\"fulano@gmail.com\")\r\n      const emailExists = sessionStorage.getItem('emailValidator')\r\n      //console.log(\"email COM PARSE\",JSON.parse( emailExists))\r\n    \r\n      //Transforma a string em objt (JSON.parse(emailExists))\r\n       const data ={\r\n         email: JSON.parse( emailExists)\r\n       }\r\n       //Manda via post esse dado para a api {\"email\":\"fulano@gmail.com\"}\r\n       const res = await Api.post('findEmail/',data);\r\n       if(res.status === 200){\r\n        //Se ok retorna 200 e o id específico daquele email\r\n        console.log(\">>>>>>>>\",res.data.id)\r\n        //Guardo o id no sessionStorage\r\n        sessionStorage.setItem('id',res.data.id);\r\n        //Busco esse id\r\n        const dataId2 = sessionStorage.getItem('id');\r\n        console.log(\"id>\",dataId2)\r\n        window.location.href= '/confirmEmail';\r\n      }\r\n        } catch (error) {\r\n          //Retorno erros da api\r\n          const { data } = error.response;\r\n          alert(data.message);\r\n        }\r\n        \r\n        //Pega os dados brutos do sessionStorage\r\n        const emailExists =  sessionStorage.getItem('emailValidator');\r\n        //Transforma em objeto\r\n        const email =JSON.parse(emailExists);\r\n        //Busca no banco o email\r\n        await Api.post('sendEmailController',{email})\r\n        .then(response =>{\r\n         if(response.status === 200){\r\n          alert('Link sent, check your email')\r\n         }\r\n        })\r\n        \r\n        \r\n        if (this.state.estado===\"Confirm e-mail\"){\r\n          this.setState({\r\n            estado: ''\r\n          });\r\n          this._interval=setInterval(this.aumentar,1000);\r\n          }\r\n        \r\n    \r\n      }\r\n    \r\n       aumentar(e){\r\n        \r\n        if(this.state.estado===''){\r\n          this.setState({\r\n            contador: this.state.contador-1\r\n            \r\n          });\r\n          \r\n          if(this.state.contador === 0){\r\n            window.location.href= '/confirmEmail';\r\n        }\r\n        }\r\n      }\r\n      async handleContadorminus(){\r\n        \r\n        \r\n        \r\n        const emailExists =  sessionStorage.getItem('emailValidator');\r\n        const email = JSON.parse(emailExists);\r\n        await Api.post('sendEmailController',{email})\r\n        .then(resp =>{\r\n          console.log(resp)\r\n        })\r\n          \r\n        \r\n       \r\n      }\r\n      close(){\r\n        window.location.href= '/';\r\n        sessionStorage.clear()\r\n       \r\n      }\r\n      render() {\r\n        \r\n        return (\r\n          <div className=\" text-center\">\r\n    \r\n            <h1>{this.state.contador}</h1>\r\n            <Botao  text={this.state.estado}   onClick={this.handleContadorplus}/>\r\n            <Botao text=\"Resend\"  onClick={this.handleContadorminus}/> \r\n            <Botao text=\"Close\"  onClick={this.close}/> \r\n          </div>\r\n        );\r\n      }\r\n    }"]},"metadata":{},"sourceType":"module"}